<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶£å‘³å¥–çŠ¶ç”Ÿæˆå™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'golden': '#daa520',
                        'vintage-red': '#B71C1C',
                        'vintage-green': '#1B5E20',
                        'vintage-yellow': '#F9A825',
                        'parchment': '#F5F0E1'
                    },
                    fontFamily: {
                        'cursive': '"æ¥·ä½“", "STKaiti", "åæ–‡æ¥·ä½“", cursive',
                        'header': '"éš¶ä¹¦", "STLiti", "åæ–‡éš¶ä¹¦", serif'
                    }
                }
            }
        }
    </script>
    <style>
        .vintage-border {
            position: relative;
            border: 20px solid transparent;
            border-image: url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10,10 L190,10 L190,190 L10,190 Z' fill='none' stroke='%231B5E20' stroke-width='10' stroke-dasharray='20,10' stroke-linejoin='round'/%3E%3C/svg%3E") 30 round;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }

        .curtain-top {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            height: 70px;
            background-color: #B71C1C;
            border-radius: 50% 50% 0 0;
            z-index: 10;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .star {
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            color: #FFD700;
            font-size: 36px;
            text-shadow: 0 0 8px rgba(255,215,0,0.7);
            z-index: 20;
        }

        .flower-bottom {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 48px;
            color: #E91E63;
            z-index: 10;
            text-shadow: 0 0 8px rgba(233,30,99,0.5);
        }

        .leaf {
            position: absolute;
            bottom: 15px;
            font-size: 28px;
            color: #4CAF50;
        }

        .leaf-left { left: 30%; }
        .leaf-right { right: 30%; }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-certificate {
            animation: fadeIn 0.8s ease-out;
        }

        /* å¥–çŠ¶å†…æ–‡å­— */
        .certificate-content {
            position: relative;
            z-index: 5;
            text-align: center;
        }

        textarea.custom-content {
            height: 120px;
            resize: none;
        }

        .color-preview {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-left: 8px;
            vertical-align: middle;
            box-shadow: 0 0 3px rgba(0,0,0,0.3);
        }

        .pin-icon {
            cursor: pointer;
            margin-left: 8px;
            transition: all 0.3s;
        }

        .pin-icon.active {
            color: #FF5722;
            transform: rotate(15deg);
        }

        .organization-container {
            margin-bottom: 4px;
        }

        .settings-btn {
            position: fixed;
            right: 30px;
            bottom: 30px;
            z-index: 100;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #B71C1C, #1B5E20);
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        .settings-btn:hover {
            transform: scale(1.1) rotate(20deg);
        }

        .settings-drawer {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100%;
            background: white;
            z-index: 200;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease-out;
            padding: 20px;
            overflow-y: auto;
        }

        .drawer-open {
            transform: translateX(-400px);
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 150;
            display: none;
        }

        .overlay-visible {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- é¡µå¤´ -->
    <header class="bg-gradient-to-r from-vintage-green to-vintage-red py-4 shadow-lg">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl text-white font-bold text-center">è¶£å‘³å¥–çŠ¶ç”Ÿæˆå™¨</h1>
            <p class="text-center text-yellow-100 mt-1">è‡ªå®šä¹‰ä¸“å±æç¬‘å¥–çŠ¶ï¼Œè¡¨å½°ä¼˜ç§€è¡¨ç°</p>
        </div>
    </header>

    <div class="container mx-auto p-4">
        <div class="flex flex-col items-center">
            <!-- é¢„è§ˆåŒº -->
            <div class="w-full max-w-4xl">
                <div class="bg-white rounded-lg shadow-xl overflow-hidden p-6 w-full">
                    <h2 class="text-xl font-semibold text-center mb-4">å¥–çŠ¶é¢„è§ˆ</h2>
                    <div id="certificate-preview" class="vintage-border bg-parchment relative p-8 animate-certificate" style="min-height: 650px;">
                        <div class="curtain-top"></div>
                        <div class="star">â˜…</div>

                        <div class="certificate-content">
                            <h2 id="preview-title" class="text-5xl font-header mb-8 mt-6" style="color: #B71C1C;">å¥–çŠ¶</h2>

                            <p class="text-xl mt-10 mb-3">æˆäºˆï¼š<span id="preview-name" class="font-bold underline">å°ç¾åŒå­¦</span></p>
                            <div id="preview-content" class="text-lg my-8 font-cursive leading-relaxed">
                                ä¸ºäº†è¡¨å½°ä½ å˜´å·´è¯´ä¸ªä¸åœï¼Œç‰¹æ­¤è¡¨å½°ä½ ä¸º"æœ€ä½³è¯å” ç²¾"ï¼Œä»¥èµ„é¼“åŠ±ï¼Œå†æ¥å†å‰ï¼
                            </div>

                            <div class="flex justify-between mt-20 flex-col items-end">
                                <div class="organization-container">
                                    <p id="preview-organization" class="text-lg font-cursive">æç¬‘å¹¼å„¿å›­</p>
                                </div>
                                <div>
                                    <p id="preview-date" class="text-lg font-cursive">2025å¹´7æœˆ28æ—¥</p>
                                </div>
                            </div>
                        </div>

                        <div class="flower-bottom">â€</div>
                        <div class="leaf leaf-left">ğŸƒ</div>
                        <div class="leaf leaf-right">ğŸƒ</div>
                    </div>

                    <div class="mt-6 text-center">
                        <button id="download-btn" class="bg-vintage-green hover:bg-green-800 text-white py-2 px-6 rounded-full transition transform hover:scale-105">
                            ä¸‹è½½å¥–çŠ¶
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å³ä¸‹è§’è®¾ç½®æŒ‰é’® -->
    <div class="settings-btn" id="open-settings">
        âš™ï¸
    </div>

    <!-- è®¾ç½®æŠ½å±‰é¢æ¿ -->
    <div class="settings-drawer" id="settings-drawer">
        <h2 class="text-xl font-semibold text-center mb-4">å¥–çŠ¶è®¾ç½®</h2>

        <div id="certificate-form" class="space-y-5">
            <div>
                <label class="block text-gray-700 mb-2">æ ‡é¢˜å†…å®¹</label>
                <input type="text" id="title" value="å¥–çŠ¶" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-vintage-red">
            </div>

            <div>
                <label class="block text-gray-700 mb-2">è·å¥–äººå§“å
                    <span id="pin-name" class="pin-icon active">ğŸ“Œ</span>
                </label>
                <input type="text" id="name" value="å°ç¾åŒå­¦" placeholder="è¾“å…¥è·å¥–äººå§“å" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-vintage-red">
            </div>

            <div>
                <label class="block text-gray-700 mb-2">å¥–çŠ¶å†…å®¹</label>
                <textarea id="content" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-vintage-red custom-content">ä¸ºäº†è¡¨å½°ä½ å˜´å·´è¯´ä¸ªä¸åœï¼Œç‰¹æ­¤è¡¨å½°ä½ ä¸º"æœ€ä½³è¯å” ç²¾"ï¼Œä»¥èµ„é¼“åŠ±ï¼Œå†æ¥å†å‰ï¼</textarea>
                <p class="text-sm text-gray-500 mt-1">å¯è‡ªå®šä¹‰æ–‡æœ¬å†…å®¹</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-gray-700 mb-2">é¢å‘å•ä½</label>
                    <input type="text" id="organization" value="æç¬‘å¹¼å„¿å›­" placeholder="è¾“å…¥é¢å‘å•ä½" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-vintage-red">
                </div>
                <div>
                    <label class="block text-gray-700 mb-2">æ—¥æœŸ</label>
                    <input type="text" id="date" value="2025å¹´7æœˆ28æ—¥" placeholder="ä¾‹å¦‚ï¼š2025å¹´7æœˆ28æ—¥" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-vintage-red">
                </div>
            </div>

            <hr class="my-4">

            <h3 class="text-lg font-medium text-gray-800">è‡ªå®šä¹‰æ ·å¼</h3>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div>
                    <label class="block text-gray-700 mb-2">èƒŒæ™¯é¢œè‰²</label>
                    <div class="flex items-center">
                        <input type="color" id="bg-color" value="#F5F0E1" class="w-10 h-10 border-0 rounded cursor-pointer">
                        <span class="ml-2 text-gray-600 font-medium">ç±³é»„</span>
                        <span class="color-preview ml-1" style="background-color: #F5F0E1;"></span>
                    </div>
                </div>
                <div>
                    <label class="block text-gray-700 mb-2">æ ‡é¢˜é¢œè‰²</label>
                    <div class="flex items-center">
                        <input type="color" id="title-color" value="#B71C1C" class="w-10 h-10 border-0 rounded cursor-pointer">
                        <span class="ml-2 text-gray-600 font-medium">çº¢è‰²</span>
                        <span class="color-preview ml-1" style="background-color: #B71C1C;"></span>
                    </div>
                </div>
            </div>

            <div class="pt-6 flex flex-col gap-3">
                <button type="button" id="random-content" class="bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-4 rounded transition w-full">
                    éšæœºå†…å®¹
                </button>

                <div class="grid grid-cols-2 gap-3">
                    <button type="button" id="cancel-btn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded transition w-full">
                        å–æ¶ˆ
                    </button>
                    <button type="button" id="confirm-btn" class="bg-vintage-green hover:bg-green-800 text-white py-2 px-4 rounded transition w-full">
                        ç¡®è®¤
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- é®ç½©å±‚ -->
    <div class="overlay" id="overlay"></div>

    <footer class="mt-12 py-6 bg-gray-100 text-center text-gray-600">
        <p>è¶£å‘³å¥–çŠ¶ç”Ÿæˆå™¨ &copy; 2025 - ææ€ªä¸“å±å®šåˆ¶</p>
    </footer>

    <script>
        // ä¿®å¤åçš„æç¬‘å¥–åŠ±æ•°æ® - ä¿æŒä¸€è‡´çš„å¯¹åº”å…³ç³»
        const funnyAwards = [
            {
                performance: "å˜´å·´è¯´ä¸ªä¸åœ",
                title: "æœ€ä½³è¯å” ç²¾",
                organization: "æç¬‘å¹¼å„¿å›­"
            },
            {
                performance: "ç¡è§‰å‘¼å™œéœ‡å¤©å“",
                title: "å‘¼å™œå¤§ç‹",
                organization: "åˆç¡å°èƒ½æ‰‹åä¼š"
            },
            {
                performance: "é¥­é‡èµ›è¿‡å°æé¾™",
                title: "å¹²é¥­å°å‹‡å£«",
                organization: "ç¾é£ŸåŠ æ²¹ç«™"
            },
            {
                performance: "æ¯å¤©éƒ½ç¬‘å®¹æ»¡é¢",
                title: "å¼€å¿ƒæœå°å¤©ä½¿",
                organization: "é˜³å…‰å¹¼å„¿å›­"
            },
            {
                performance: "ç©å…·æ”¶çº³å¤§å¸ˆ",
                title: "æ•´æ´å°æ ‡å…µ",
                organization: "ç©å…·æ€»åŠ¨å‘˜å§”å‘˜ä¼š"
            },
            {
                performance: "æ¶‚é¸¦è‰ºæœ¯å¤©åˆ†",
                title: "åˆ›æ„å°ç”»å®¶",
                organization: "è‰ºæœ¯åˆ›ä½œè¥"
            }
        ];

        // å¯çˆ±çš„å°å
        const cuteNames = ["å°ç¾", "å£®å£®", "èŠ±èŠ±", "è±†è±†", "çƒçƒ", "ä¹å®", "èŒèŒ"];
        const cuteSuffix = ["åŒå­¦", "å®è´", "å®å®", "å°å¯çˆ±"];

        $(document).ready(function() {
            // åå­—å›ºå®šçŠ¶æ€ï¼ˆé»˜è®¤å›ºå®šï¼‰
            let isNamePinned = true;

            // æ‰“å¼€è®¾ç½®é¢æ¿
            $("#open-settings").click(function() {
                $("#settings-drawer").addClass("drawer-open");
                $("#overlay").addClass("overlay-visible");
            });

            // å…³é—­è®¾ç½®é¢æ¿
            $("#cancel-btn, #overlay").click(function() {
                $("#settings-drawer").removeClass("drawer-open");
                $("#overlay").removeClass("overlay-visible");
            });

            // ç¡®è®¤è®¾ç½®
            $("#confirm-btn").click(function() {
                updatePreview();
                $("#settings-drawer").removeClass("drawer-open");
                $("#overlay").removeClass("overlay-visible");
            });

            // å›ºå®šå›¾æ ‡ç‚¹å‡»äº‹ä»¶
            $("#pin-name").click(function() {
                isNamePinned = !isNamePinned;
                $(this).toggleClass("active", isNamePinned);
                $(this).text(isNamePinned ? "ğŸ“Œ" : "ğŸ“");
            });

            // è®¾ç½®é¢æ¿ä¸­åå­—è¾“å…¥äº‹ä»¶
            $("#name").on('input', function() {
                // åå­—è¾“å…¥åè‡ªåŠ¨æ¿€æ´»å›ºå®šçŠ¶æ€
                if ($(this).val().trim() !== '') {
                    isNamePinned = true;
                    $("#pin-name").addClass("active").text("ğŸ“Œ");
                } else {
                    isNamePinned = false;
                    $("#pin-name").removeClass("active").text("ğŸ“");
                }
            });

            // å®æ—¶æ›´æ–°é¢„è§ˆ
            $("#certificate-form input, #certificate-form textarea").on('input', function() {
                updatePreview();
            });

            // é¢œè‰²é€‰æ‹©å™¨äº‹ä»¶ç›‘å¬
            $("#bg-color, #title-color").on('input', function() {
                updateColors();
            });

            // éšæœºå†…å®¹ç”Ÿæˆå‡½æ•°
            $("#random-content").click(function() {
                // éšæœºé€‰æ‹©ä¸€ä¸ªå®Œæ•´å¥–åŠ±é›†
                const randomAward = funnyAwards[Math.floor(Math.random() * funnyAwards.length)];

                // æœªå›ºå®šåå­—åˆ™ç”Ÿæˆéšæœºåå­—
                if (!isNamePinned) {
                    const randomName = cuteNames[Math.floor(Math.random() * cuteNames.length)] +
                                     cuteSuffix[Math.floor(Math.random() * cuteSuffix.length)];
                    $("#name").val(randomName);

                    // è¾“å…¥åå­—åè‡ªåŠ¨å›ºå®š
                    isNamePinned = true;
                    $("#pin-name").addClass("active").text("ğŸ“Œ");
                }

                // ç”Ÿæˆå†…å®¹æ–‡æœ¬
                $("#content").val(`ä¸ºäº†è¡¨å½°ä½ ${randomAward.performance}ï¼Œç‰¹æ­¤è¡¨å½°ä½ ä¸º"${randomAward.title}"ï¼Œä»¥èµ„é¼“åŠ±ï¼Œå†æ¥å†å‰ï¼`);

                // è®¾ç½®æœºæ„
                $("#organization").val(randomAward.organization);

                // è®¾ç½®å½“å‰æ—¥æœŸ
                const now = new Date();
                const formattedDate = `${now.getFullYear()}å¹´${now.getMonth() + 1}æœˆ${now.getDate()}æ—¥`;
                $("#date").val(formattedDate);

                // ç«‹å³æ›´æ–°é¢„è§ˆ
                updatePreview();
            });

            // ä¸‹è½½æŒ‰é’®åŠŸèƒ½
            $("#download-btn").click(function() {
                alert("åŠŸèƒ½è¯´æ˜ï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ­¤å¤„å°†å®ç°å¥–çŠ¶çš„å›¾ç‰‡ä¸‹è½½åŠŸèƒ½ã€‚\n\næ¨èå®ç°æ–¹æ¡ˆï¼š\n1. å¼•å…¥html2canvas.min.jsåº“\n2. ä½¿ç”¨html2canvas()å°†é¢„è§ˆåŒºè½¬æ¢ä¸ºå›¾ç‰‡\n3. æä¾›ä¸‹è½½é“¾æ¥ç»™ç”¨æˆ·");
            });
        });

        // æ›´æ–°é¢„è§ˆå‡½æ•°
        function updatePreview() {
            $("#preview-title").text($("#title").val());
            $("#preview-name").text($("#name").val() || "å°ç¾åŒå­¦");
            $("#preview-content").html($("#content").val().replace(/\n/g, "<br>"));
            $("#preview-organization").text($("#organization").val() || "æç¬‘å¹¼å„¿å›­");
            $("#preview-date").text($("#date").val() || "2025å¹´7æœˆ28æ—¥");
        }

        // æ›´æ–°é¢œè‰²å‡½æ•°
        function updateColors() {
            $("#certificate-preview").css("background-color", $("#bg-color").val());
            $("#preview-title").css("color", $("#title-color").val());
        }

        // åˆå§‹åŒ–æ›´æ–°
        updatePreview();
    </script>
</body>
</html>
